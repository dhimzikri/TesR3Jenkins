{"title":"Advance Payment Alloc Detail","id":"Advancepaymentallocreqdetail2ForReturn","addButton":false,"addLink":"","pathOption":"","backButton":false,"component":[{"customComponent":{"componentRef":"${AdvanceRequestInfo}"},"id":"fa0fdaf5-fb9f-4aae-b8a3-977ca3df5d26"},{"form":{"subsection":{"title":"Allocation Data","isVertical":true,"isSubsection":true,"isModeAdd":true,"formInput":[{"Action":[{"type":"setLookupCrit","condition":[],"lookupKey":"VendorBankAcc","listCrit":[{"variable":"","value":"","propName":"vba.VENDOR_ID","propValue":"VendorId","restriction":"Eq"}]},{"type":"callAPI","environment":"FOU","apiPath":"/v1/Vendor/GetVendorByVendorId","reqObj":[{"propName":"Id","propValue":"VendorId"}],"bindToVar":[{"variable":"VendorCode","value":"VendorCode"},{"variable":"VendorName","value":"VendorName"}],"bindToDict":[{"variable":"VendorCode","value":"VendorCode"},{"variable":"TaxpayerNo","value":"TaxpayerNo"}],"bindToFormArr":[],"condition":[]}],"Type":"LOOKUP","Label":"Vendor","Variable":"VendorId","IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":true,"IsClear":false,"LookupName":"${Lookupvendor}","Criteria":[]},{"Action":[{"type":"callAPI","environment":"FOU","apiPath":"/v1/VendorBankAcc/GetVendorBankAccByVendorBankAccId","reqObj":[{"propName":"Id","propValue":"VendorBankAcc"}],"bindToVar":[{"variable":"VendorBankCode","value":"BankCode"},{"variable":"VendorBankAccNo","value":"BankAccountNo"},{"variable":"VendorBankBranch","value":"BankBranch"},{"variable":"VendorBankAccName","value":"BankAccountName"},{"variable":"VendorBankName","value":"BankName"}],"bindToDict":[],"bindToFormArr":[],"condition":[]}],"Type":"LOOKUP","Label":"vendor bank account","Variable":"VendorBankAcc","IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":true,"IsClear":false,"LookupName":"${Lookup-vendorbankacc}","Criteria":[]},{"Action":[],"Type":"TEXT","Label":"Invoice No","Variable":"InvoiceNo","Value":"","Pattern":"","IsRequired":true,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Placeholder":""},{"Action":[{"type":"requiredField","condition":[{"variable":"ChargedToAgrmntNo","restriction":"NEQ","value":""}],"listField":["ChargedToAgrmntAmt"],"isRevertable":true},{"type":"bindValue","condition":[{"variable":"ChargedToAgrmntNo","restriction":"NEQ","value":""}],"listBind":[{"variable":"IsChargedToCust","value":"true"}],"isRevertable":true},{"type":"bindValue","condition":[{"variable":"ChargedToAgrmntNo","restriction":"Eq","value":""}],"listBind":[{"variable":"IsChargedToCust","value":"false"}],"isRevertable":true}],"Type":"LOOKUP","Label":"Charge To Agreement","Variable":"ChargedToAgrmntNo","IsRequired":false,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":true,"IsClear":false,"LookupName":"${Agreementlookup}","Criteria":[]},{"Action":[],"Type":"DATE","Label":"Invoice Date","Variable":"InvoiceDt","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Max":null,"MinDtCode":null,"MinOperator":null,"MinValue":null,"MaxDtCode":null,"MaxOperator":null,"MaxValue":null,"DtRestrictOptMin":"","DtRestrictOptMax":""},{"Action":[],"Type":"CURRENCY","Label":"Invoice Amount","Variable":"InvoiceAmt","Value":"0","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Min":"","Max":"","CurrencyMaskConfig":{"precision":"2"}},{"Action":[],"Type":"CURRENCY","Label":"Amount Charged","Variable":"ChargedToAgrmntAmt","Value":"","IsRequired":false,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Min":"","Max":"","CurrencyMaskConfig":{"precision":"2"}},{"Action":[],"Type":"TEXT","Label":"ALLOCATION NOTES","Variable":"Notes","Value":"","Pattern":"","IsRequired":true,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Placeholder":""},{"Action":[{"type":"bindValue","condition":[{"variable":"CurrCode","restriction":"Eq","value":"IDR"}],"listBind":[{"variable":"CurrRateAmt","value":"1"}],"isRevertable":true},{"type":"bindValue","condition":[{"variable":"CurrCode","restriction":"NEQ","value":"IDR"}],"listBind":[{"variable":"CurrRateAmt","value":"0"}],"isRevertable":true},{"type":"disabledField","condition":[{"variable":"CurrCode","restriction":"Eq","value":"IDR"}],"listField":["CurrRateAmt"],"isRevertable":true}],"Type":"DDL","Label":"CURRENCY","Variable":"CurrCode","IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":true,"UseDefaultValue":false,"isUseAPI":true,"DdlItemsObj":null,"DdlReqObj":{"Environment":"FOU","Url":"/v1/RefCurr/GetListKvpActiveRefCurr","CustomObjName":"ReturnObject","CustomKeyName":"Key","CustomValueName":"Value","ReqObj":{}}},{"Action":[],"Type":"CURRENCY","Label":"Currency Rates","Variable":"CurrRateAmt","Value":"0","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Min":"","Max":"","CurrencyMaskConfig":{"precision":"2"}},{"Action":[],"Type":"NUMERIC","Label":"AdvPayAllocHId","Variable":"AdvPayAllocHId","Value":"0","IsRequired":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Min":"","Max":""},{"Action":[],"Type":"BOOL","Label":"IsChargedToCust","Variable":"IsChargedToCust","Value":false,"IsRequired":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false},{"Action":[],"Type":"TEXT","Label":"VendorName","Variable":"VendorName","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorCode","Variable":"VendorCode","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankCode","Variable":"VendorBankCode","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankAccNo","Variable":"VendorBankAccNo","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankBranch","Variable":"VendorBankBranch","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankAccName","Variable":"VendorBankAccName","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankName","Variable":"VendorBankName","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""}],"onLoad":[{"conditions":[],"isUseApi":false,"reqObj":[{"isFromDict":false,"propName":"AdvPayAllocHId","propValue":"AdvPayAllocHId"}],"environment":"localStorage","apiPath":"ReqDetail.ListAdvPayAllocHObj","propName":"ReqDetail.ListAdvPayAllocHObj"}],"criteria":[],"mapCookie":[],"initAction":[]}},"id":"e65993c2-22bb-4974-8435-9aa120de39fa"},{"fileupload":{"label":"File to Upload","variable":"DocumentList","docuploadType":"Dokumen Kontrak","limitFileSize":"1022","allowedExt":"pdf;doc;docx;xls;xlsx","isRequired":false,"isSubsection":true,"metadata":[{"label":"Jenis Dokumen","value":"Dokumen Perjanjian Kontrak"}],"subsectionTitle":"File Upload"},"id":"f6d15b79-4f22-413c-80e4-d2e62d4202f3"},{"table":{"isFromApi":false,"title":"List Detail Allocation","resultData":"ListAdvPayAllocDObj","isSubsection":true,"usePagination":true,"includeSubmit":true,"tableInput":{"isSeq":true,"headerList":[{"type":"label","label":"Employee Name","position":"center"},{"type":"label","label":"Business Activity","position":"center"},{"type":"label","label":"Activity","position":"center"},{"type":"label","label":"Sub Activity","position":"center"},{"type":"label","label":"Allocation","position":"center"},{"type":"label","label":"Business Unit","position":"center"},{"type":"label","label":"Origin Office","position":"center"},{"type":"label","label":"Cost Distributed","position":"center"},{"type":"label","label":"Amount","position":"center"},{"type":"label","label":"Request Amount","position":"center"},{"type":"label","label":"Notes","position":"center"},{"type":"label","label":"action","position":"center"},{"type":"label","label":"delete","position":"center"}],"bodyList":[{"type":"text","position":"left","property":"EmpName","isFlagColor":false},{"type":"text","position":"left","property":"BusinessAct","isFlagColor":false},{"type":"text","position":"left","property":"Act","isFlagColor":false},{"type":"text","position":"left","property":"SubAct","isFlagColor":false},{"type":"text","position":"left","property":"AllocName","isFlagColor":false},{"type":"text","position":"left","property":"BizUnitName","isFlagColor":false},{"type":"text","position":"left","property":"OriginOfficeName","isFlagColor":false},{"type":"text","position":"center","property":"IsCostDistributedName","isFlagColor":false},{"type":"decimal","position":"right","property":"TrxAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"decimal","position":"right","property":"ReqAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"text","position":"left","property":"TrxDescr","isFlagColor":false},{"type":"action","position":"center","action":[{"type":"modal","width":"80","isTemplate":true,"component":"AddEditAdvancePaymentAllocForReturnNew","disableClose":false,"param":[{"type":"mode","property":"edit"},{"type":"CurrCode","property":"formRaw.CurrCode"},{"type":"AdvPayAllocDId","property":"AdvPayAllocDId"},{"type":"RowObj","property":"RowObj"},{"type":"Reim","property":"AdvPayAlloc"},{"type":"refPaymentAllocCode","property":"RowObj.PaymentAllocCode"},{"type":"InvoiceDt","property":"formRaw.InvoiceDt"},{"type":"VendorId","property":"form.VendorId"},{"type":"TaxpayerNo","property":"TaxpayerNo"},{"type":"CurrRateAmt","property":"formRaw.CurrRateAmt"},{"type":"InvoiceNo","property":"form.InvoiceNo"}],"refreshFrom":"fromLocal","mapToDict":"ListAdvPayAllocDObj","affectedTable":"0ac551fd-b63d-49e3-99e9-411ba51c2769","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"CostMaster.CostMaster_1","propValue":"CostMaster_1"},{"propName":"CostMaster.CostMaster_2","propValue":"CostMaster_2"},{"propName":"CostMaster.CostMaster_3","propValue":"CostMaster_3"},{"propName":"CostMaster.CostMaster_4","propValue":"CostMaster_4"},{"propName":"Coa","propValue":"CoaName"}],"excObj":[]}]},{"type":"action","position":"center","action":[{"type":"delete","property":"Idx"}]}],"footerList":[{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"LABEL","position":"left","label":"Total"},{"type":"AGGREGATE","position":"right","label":"TotalTrxAmt","property":"TrxAmt","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"AGGREGATE","position":"right","label":"TotalReqAmt","property":"ReqAmt","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"}]},"getData":{"environment":"","apiPath":"","customObjName":"ReturnObject","reqObj":[]}},"id":"0ac551fd-b63d-49e3-99e9-411ba51c2769","listBtn":[{"displayName":"Add Detail Allocation","id":"add detail allocationId","key":"AddDetailAlloc","position":"top","icon":"","cssClass":"btn-primary","conditions":[],"btnType":"button","action":{"type":"modal","width":"80","isTemplate":true,"component":"AddEditAdvancePaymentAllocForReturnNew","disableClose":false,"params":[{"propName":"CurrCode","propValue":"formRaw.CurrCode"},{"propName":"mode","propValue":"add"},{"propName":"Reim","propValue":"AdvPayAlloc"},{"propName":"InvoiceDt","propValue":"formRaw.InvoiceDt"},{"propName":"VendorId","propValue":"formRaw.VendorId"},{"propName":"CurrRateAmt","propValue":"formRaw.CurrRateAmt"},{"propName":"TaxpayerNo","propValue":"TaxpayerNo"},{"propName":"InvoiceNo","propValue":"form.InvoiceNo"}],"refreshFrom":"fromLocal","affectedTable":"0ac551fd-b63d-49e3-99e9-411ba51c2769","mapToDict":"ListAdvPayAllocDObj","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"CostMaster.CostMaster_1","propValue":"CostMaster_1"},{"propName":"CostMaster.CostMaster_2","propValue":"CostMaster_2"},{"propName":"CostMaster.CostMaster_3","propValue":"CostMaster_3"},{"propName":"CostMaster.CostMaster_4","propValue":"CostMaster_4"},{"propName":"Coa","propValue":"CoaName"}],"excObj":[]}}]}],"serviceUrl":{"add":{"environment":"","apiPath":"","apiUrl":""},"edit":{"environment":"","apiPath":"","apiUrl":""},"createRfa":{"environment":"","apiPath":"","apiUrl":""}},"hideTitle":true,"isRedirect":false,"redirectOption":"","redirectLink":"","hideSubmitButton":false,"listBtn":[],"customToastrMsg":"","onCancel":{},"isOverrideSubmit":true,"isOverrideCancel":false,"onSubmit":[{"conditions":[{"restriction":"NEQ","value":"edit","property":"mode"}],"result":{"type":"localStorage","mode":"add","key":"ReqDetail.ListAdvPayAllocHObj","backUrl":"/advance-payment-alloc/return/detail","mapObj":[{"propName":"ReqAmt","propValue":"ReqAmt_footer"},{"propName":"_form","propValue":"form"}],"excObj":[]}},{"conditions":[{"property":"mode","restriction":"EQ","value":"edit"}],"result":{"type":"localStorage","mode":"edit","key":"ReqDetail.ListAdvPayAllocHObj","backUrl":"/advance-payment-alloc/return/detail","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"ReqAmt","propValue":"ReqAmt_footer"}],"excObj":[]}}],"hideCancelButton":false,"onInit":[],"conditionalTitle":[],"persistData":true,"persistPropName":"ReqDetail2"}