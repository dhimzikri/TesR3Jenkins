{"title":"Staff Claim Summary","hideTitle":false,"id":"StaffClaimRequestDtl","addButton":false,"addLink":"","pathOption":"","backButton":false,"component":[{"view":{"subsection":{"subSectionId":"StaffClaimSummaryId","subSectionTitle":"Staff Claim Summary","concatDate":false,"setDate":"","formatDate":"","environment":"FINOPS","apiVersion":"v1","uri":"","mainInfoPath":"/v1/StaffClaim/GetStaffClaimHByRTrxNo","querystring":{"name":""},"reqObj":{"TrxNo":"TrxNo"},"resObjName":"","mainInfo":[{"type":"text","label":"Staff Claim No","property":"StaffClaimNo","position":"left","isHide":false,"customClassLabel":"","customClassProperty":""},{"type":"text","label":"Requestor Name","property":"ReqBy","position":"left","isHide":false,"customClassLabel":"","customClassProperty":""},{"type":"currency","label":"TOTAL INVOICE AMOUNT (in IDR)","property":"TotalInvoiceAmt","precision":"0.2","IsPrcnt":false,"position":"left","isHide":false,"customClassLabel":"","customClassProperty":""},{"type":"currency","label":"Total Request Amount","property":"TotalReqAmt","precision":"0.2","IsPrcnt":false,"position":"left","isHide":false,"customClassLabel":"","customClassProperty":""}],"whereValue":[],"fromValue":[]}},"id":"0f4358c6-7708-4b07-8d42-a46bb757c2d2","conditions":[{"restriction":"IFFOUND","property":"TrxNo"}]},{"form":{"subsection":{"title":"Employee ","isVertical":true,"isSubsection":true,"isModeAdd":true,"formInput":[{"Action":[{"type":"callAPI","environment":"FOU","apiPath":"/v1/RefEmp/GetRefEmpByRefEmpNo","reqObj":[{"propName":"EmpNo","propValue":"EmpNo"}],"bindToVar":[],"bindToDict":[{"variable":"EmpName","value":"EmpName"}],"bindToFormArr":[],"condition":[]}],"Type":"DDL","Label":"Employee Name","Variable":"EmpNo","IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":false,"UseDefaultValue":true,"isUseAPI":true,"DdlItemsObj":null,"DdlReqObj":{"Environment":"FINOPS","Url":"/v1/StaffClaim/GetEmpListToBeRequested","CustomObjName":"ReturnObject","CustomKeyName":"Key","CustomValueName":"Value","ReqObj":{}}},{"Action":[],"Type":"TEXT","Label":"","Variable":"EmpName","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""}],"onLoad":[],"criteria":[],"mapCookie":[{"variableName":"EmpNo","cookieName":"EmpNo","isEmptyNotFound":true}],"initAction":[]}},"id":"47f4e69b-380d-4bd6-ba69-37c391a782f2","conditions":[]},{"table":{"isFromApi":false,"title":"Allocation","resultData":"StaffClaimDObjs","isSubsection":true,"tableInput":{"isSeq":false,"headerList":[{"type":"label","label":"Input Date","position":"center"},{"type":"label","label":"Activity","position":"center"},{"type":"label","label":"Sub Activity","position":"center"},{"type":"label","label":"Invoice Amount","position":"center"},{"type":"label","label":"Request Amount","position":"center"},{"type":"label","label":"Origin Amount","position":"center"},{"type":"label","label":"Currency","position":"center"},{"type":"label","label":"Currency Rates","position":"center"},{"type":"label","label":"edit","position":"center"},{"type":"label","label":"delete","position":"center"}],"bodyList":[{"type":"date","position":"center","property":"InputDt","isFlagColor":false},{"type":"text","position":"center","property":"Activity","isFlagColor":false},{"type":"text","position":"left","property":"SubActivity","isFlagColor":false},{"type":"decimal","position":"right","property":"InvoiceAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"decimal","position":"right","property":"ReqAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"decimal","position":"right","property":"OriginAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"text","position":"center","property":"CurrCode","isFlagColor":false},{"type":"decimal","position":"center","property":"CurrRateAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"action","position":"center","action":[{"type":"modal","width":"80","isTemplate":true,"component":"Staffclaimrequestaddallocation","disableClose":false,"param":[{"type":"EmpName","property":"EmpName"},{"type":"RowObj","property":"RowObj"},{"type":"mode","property":"edit"},{"type":"refPaymentAllocCode","property":"RowObj.PaymentAllocCode"},{"type":"EmpNo","property":"formRaw.EmpNo"},{"type":"CurrCode","property":"RowObj.CurrCode"}],"refreshFrom":"fromLocal","mapToDict":"StaffClaimDObjs","affectedTable":"39565af8-c127-4465-b301-b9daadef6cdd","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"CostMaster.CostMaster_1","propValue":"CostMaster_1"},{"propName":"CostMaster.CostMaster_2","propValue":"CostMaster_2"},{"propName":"CostMaster.CostMaster_3","propValue":"CostMaster_3"},{"propName":"CostMaster.CostMaster_4","propValue":"CostMaster_4"}],"excObj":[]}]},{"type":"action","position":"center","action":[{"type":"delete","property":"idx"}]}],"footerList":[{"type":"BLANK"},{"type":"BLANK"},{"type":"LABEL","position":"center","label":"Total"},{"type":"AGGREGATE","position":"right","label":"Total Invoice Amount","property":"InvoiceAmt","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"AGGREGATE","position":"right","label":"Total Request Amount","property":"ReqAmt","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"AGGREGATE","position":"right","label":"Origin Amt","property":"OriginAmt","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"}]},"getData":{"environment":"FMSUrl","apiPath":"/v1/StaffClaim/GetListStaffClaimDByTrxNo","customObjName":"StaffClaimDObjs","reqObj":[{"isFromDict":false,"propName":"TrxNo","propValue":"TrxNo"}],"conditions":[]},"usePagination":true,"includeSubmit":true},"id":"39565af8-c127-4465-b301-b9daadef6cdd","conditions":[],"listBtn":[{"displayName":"Add Allocation","id":"add allocationId","key":"","position":"top","icon":"","cssClass":"btn-primary-2 m-2","conditions":[],"btnType":"button","action":{"type":"modal","width":"85","isTemplate":true,"disableClose":false,"params":[{"propName":"EmpName","propValue":"EmpName"},{"propName":"OsLimitAmt","propValue":"OsLimitAmt"},{"propName":"mode","propValue":"add"},{"propName":"EmpNo","propValue":"formRaw.EmpNo"}],"refreshFrom":"fromLocal","affectedTable":"39565af8-c127-4465-b301-b9daadef6cdd","mapToDict":"StaffClaimDObjs","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"CostMaster.CostMaster_1","propValue":"CostMaster_1"},{"propName":"CostMaster.CostMaster_2","propValue":"CostMaster_2"},{"propName":"CostMaster.CostMaster_3","propValue":"CostMaster_3"},{"propName":"CostMaster.CostMaster_4","propValue":"CostMaster_4"}],"excObj":[],"component":"Staffclaimrequestaddallocation"}}]},{"form":{"subsection":{"title":"Final Allocation","isVertical":true,"isSubsection":false,"isModeAdd":true,"formInput":[{"Action":[],"Type":"RADIO","Label":"Final Allocation","Variable":"IsSubmit","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":true,"Options":[{"Key":"true","Value":"yes"},{"Key":"false","Value":"no"}]}],"onLoad":[],"criteria":[],"mapCookie":[],"initAction":[{"type":"bindValue","condition":[],"listBind":[{"variable":"IsSubmit","value":"false"}],"isRevertable":false}]}},"id":"f3787e4f-39a2-4044-bba1-698bded82cea"},{"approvalcreate":{"categoryCode":"STAFF_CLAIM_APV","refReasonTypeCode":"STAFF_CLAIM","isHideTrxNo":true,"apvTypecodes":[{"TypeCode":"APV_LIMIT"},{"Attributes[0].AttributeName":"Approval Amount"},{"Attributes[0].AttributeValue":"ReqAmt_footer"}],"setApprovalObj":{"environment":"","apiPath":"","reqObj":{}},"onSubmit":{"environment":"FMSUrl","apiPath":"/v1/StaffClaim/SubmitStaffClaim","approvalRequestObj":{}},"fromApi":false,"schmCode":"STAFF_CLAIM_APV_SCHEME"},"id":"9923d249-8e76-4d8a-841d-4fc653142e64","conditions":[{"property":"formRaw.IsSubmit","restriction":"EQ","value":"true"}]}],"serviceUrl":{"add":{"environment":"","apiPath":"","apiUrl":""},"edit":{"environment":"","apiPath":"","apiUrl":""},"createRfa":{"environment":"","apiPath":"","apiUrl":""}},"isRedirect":false,"redirectOption":"","redirectLink":"","hideSubmitButton":false,"hideCancelButton":false,"listBtn":[],"customToastrMsg":"","onInit":[{"environment":"FMSUrl","apiPath":"/v1/StaffClaim/GetStaffClaimListAllocationByClaimNoLinq","reqObj":[{"isFromDict":false,"propName":"TrxNo","propValue":"TrxNo"}],"return":[{"propName":"StaffClaimDObjs","propValue":"StaffClaimDObjs"}],"conditions":[{"property":"TrxNo","restriction":"IFFOUND","value":"TrxNo"}]},{"environment":"FMSUrl","apiPath":"/v1/StaffClaim/GetStaffClaimHByRTrxNo","reqObj":[{"isFromDict":false,"propName":"TrxNo","propValue":"TrxNo"}],"return":[{"propName":"TotalReqAmt","propValue":"TotalReqAmt"},{"propName":"EmpNo","propValue":"EmpNo"}],"conditions":[{"property":"TrxNo","restriction":"IFFOUND","value":"TrxNo"}]},{"environment":"FoundationR3Url","apiPath":"/v1/RefEmp/GetRefEmpByRefEmpNo","reqObj":[{"isFromDict":false,"propName":"EmpNo","propValue":"EmpNo"}],"return":[{"propName":"EmpName","propValue":"EmpName"}],"conditions":[{"property":"TrxNo","restriction":"IFFOUND","value":"Edit"}]},{"environment":"FINOPS","apiPath":"/v1/StaffClaim/GetEmpOsLimitAmtByEmpNo","reqObj":[{"isFromDict":false,"propName":"EmpNo","propValue":"EmpNo"}],"return":[{"propName":"OsLimitAmt","propValue":"OsLimitAmt"}],"conditions":[{"property":"mode","restriction":"EQ","value":"Edit"}]},{"environment":"FoundationR3Url","apiPath":"/v1/RefEmp/GetRefEmpByRefEmpNo","reqObj":[{"isFromDict":false,"propName":"EmpNo","propValue":"useraccess.EmpNo"}],"return":[{"propName":"EmpName","propValue":"EmpName"}],"conditions":[{"property":"mode","restriction":"NEQ","value":"edit"}]}],"isOverrideSubmit":true,"onSubmit":[{"conditions":[{"property":"token","restriction":"EQ","value":""}],"result":{"type":"function","target":"executor","alias":"SubmitStaffClaimReq","methodName":"SubmitStaffClaimReq","params":[{"propName":"form","propValue":"form"},{"propName":"StaffClaimDObjs","propValue":"StaffClaimDObjs"},{"propName":"ReqDt","propValue":"useraccess.BusinessDt"},{"propName":"router","propValue":"router"},{"propName":"toastr","propValue":"toastr"},{"propName":"http","propValue":"http"}]}},{"conditions":[{"restriction":"EQ","value":"true","property":"form.IsSubmit"}],"result":{"type":"http","environment":"FinopsUrl","path":"/v1/StaffClaim/SubmitStaffClaim","reqObj":[{"propName":"EmpNo","propValue":"formRaw.EmpNo"},{"propName":"IsSubmit","propValue":"form.IsSubmit"},{"propName":"StaffClaimDObj","propValue":"StaffClaimDObjs"},{"propName":"RFAInfo","propValue":"form.RFAInfo"},{"propName":"TrxNo","propValue":"TrxNo"}],"onSuccess":[{"result":{"type":"link","path":"/staff-claim/paging","target":"_self","params":[]},"conditions":[]},{"result":{"type":"toaster","mode":"success","message":"${Message}"},"conditions":[]}],"onError":{"type":"toaster","message":""},"excObj":[],"mapResToDict":[]}},{"conditions":[{"property":"form.IsSubmit","restriction":"NEQ","value":"true"}],"result":{"type":"http","environment":"FinopsUrl","path":"/v1/StaffClaim/SubmitStaffClaim","reqObj":[{"propName":"EmpNo","propValue":"formRaw.EmpNo"},{"propName":"IsSubmit","propValue":"form.IsSubmit"},{"propName":"StaffClaimDObj","propValue":"StaffClaimDObjs"},{"propName":"TrxNo","propValue":"TrxNo"}],"onSuccess":[{"result":{"type":"link","path":"/staff-claim/paging","target":"_self","params":[]},"conditions":[]},{"result":{"type":"toaster","mode":"success","message":"${Message}"},"conditions":[]}],"onError":{"type":"toaster","message":""},"excObj":[],"mapResToDict":[]}}],"isOverrideCancel":false,"onCancel":{},"conditionalTitle":[],"persistData":false,"persistPropName":"HeaderDtl"}