{"title":"Asset Document Borrow Approval","hideTitle":false,"id":"Assetdocumentborrowapproval","addButton":false,"addLink":"","pathOption":"","backButton":false,"component":[{"paging":{"environment":"asDocR3Url","apiVersion":"v1","pagingInput":{"title":"Asset Document Borrow Approval Task","sectionTitle":"Paging","querystring":{"name":"searchAssetDocumentBorrowApproval"},"exportExcel":false,"component":[{"id":"btdbrwTrxDocNoSearchId","type":"textbox","label":"Transaction No","name":"BTD.BRW_TRX_DOC_NO","value":"","placeholder":"","datatype":"text"},{"id":"aassetNoSearchId","type":"textbox","label":"Asset No","name":"A.ASSET_NO","value":"","placeholder":"","datatype":"text"},{"id":"case when btdaamouNo is null then '-' else stuff((select ',' + mouNo from dbobrwTrxDocAssetAgrmnt tempbtdaa with(nolock) where tempbtdaabrwTrxDocHId = btdaabrwTrxDocHId for xml path('')), 1, 1, '') endSearchId","type":"textbox","label":"Mou No","name":"CASE WHEN btdaa.MOU_NO IS NULL THEN '-' ELSE STUFF((SELECT ',' + MOU_NO FROM dbo.BRW_TRX_DOC_ASSET_AGRMNT TEMPBTDAA WITH(NOLOCK) WHERE TEMPBTDAA.BRW_TRX_DOC_H_ID = btdaa.BRW_TRX_DOC_H_ID FOR XML PATH('')), 1, 1, '') END","value":"","placeholder":"","datatype":"text"},{"id":"case when btdaaagrmntNo is null then '-' else stuff((select ',' + agrmntNo from dbobrwTrxDocAssetAgrmnt tempbtdaa with(nolock) where tempbtdaabrwTrxDocHId = btdaabrwTrxDocHId for xml path('')), 1, 1, '') endSearchId","type":"textbox","label":"Agreement No","name":"CASE WHEN btdaa.AGRMNT_NO IS NULL THEN '-' ELSE STUFF((SELECT ',' + AGRMNT_NO FROM dbo.BRW_TRX_DOC_ASSET_AGRMNT TEMPBTDAA WITH(NOLOCK) WHERE TEMPBTDAA.BRW_TRX_DOC_H_ID = btdaa.BRW_TRX_DOC_H_ID FOR XML PATH('')), 1, 1, '') END","value":"","placeholder":"","datatype":"text"},{"id":"case when cacustName is null then '-' else case when xcountCust = 1 then cacustName else stuff((select ',' + catempcustName from dbobrwTrxDocAssetAgrmnt tempraam with(nolock) left join dbocustAms catemp with(nolock) on catempcustNo = tempraamcustNo where tempraambrwTrxDocHId = btdaabrwTrxDocHId for xml path('')), 1, 1, '') end endSearchId","type":"textbox","label":"Customer Name","name":"CASE WHEN CA.CUST_NAME IS NULL THEN '-' ELSE CASE WHEN X.COUNT_CUST = 1 THEN CA.CUST_NAME ELSE STUFF((SELECT ',' + CATEMP.CUST_NAME FROM dbo.BRW_TRX_DOC_ASSET_AGRMNT TEMPRAAM WITH(NOLOCK) LEFT JOIN dbo.CUST_AMS CATEMP WITH(NOLOCK) ON CATEMP.CUST_NO = TEMPRAAM.CUST_NO WHERE TEMPRAAM.BRW_TRX_DOC_H_ID = BTDAA.BRW_TRX_DOC_H_ID FOR XML PATH('')), 1, 1, '') END END","value":"","placeholder":"","datatype":"text"},{"id":"btdreqDtSearchId","type":"datepicker","label":"Request Date >=","name":"BTD.REQ_DT","value":"","placeholder":"","datatype":"date","restriction":"gte","useDefVal":false},{"id":"btdreqDtSearchId","type":"datepicker","label":"Request Date <=","name":"BTD.REQ_DT","value":"","placeholder":"","datatype":"date","restriction":"lte","useDefVal":false},{"id":"btdusrCrtSearchId","type":"textbox","label":"Request By","name":"BTD.USR_CRT","value":"","placeholder":"","datatype":"text"},{"id":"aaassetUsageSearchId","type":"dropdown","label":"Collateral Type","name":"AA.ASSET_USAGE","value":"","placeholder":"","datatype":"text","isFromURL":true,"ddlType":"all","isEvent":false,"environment":"FOU","path":"/RefMaster/GetListKeyValueActiveByCode","criteriaPropName":"RefMasterTypeCode","criteriaPropValue":"COLLATERAL_TYPE","isQueryIn":false}],"headerList":[{"type":"sort","label":"Transaction No","position":"center","name":"BTD.BRW_TRX_DOC_NO"},{"type":"sort","label":"Asset No","position":"center","name":"A.ASSET_NO"},{"type":"sort","label":"Asset Name","position":"center","name":"AA.FULL_ASSET_NAME"},{"type":"sort","label":"Mou No","position":"center","name":"CASE WHEN X.COUNT_MOU > 1 THEN 'Multi MOU' WHEN (BTDAA.MOU_NO IS NULL OR BTDAA.MOU_NO ='') THEN '-' ELSE BTDAA.MOU_NO END"},{"type":"sort","label":"Agreement No","position":"center","name":"CASE WHEN X.COUNT_AGRMNT > 1 THEN 'Multi Agreement' WHEN BTDAA.AGRMNT_NO IS NULL THEN '-' ELSE BTDAA.AGRMNT_NO END"},{"type":"sort","label":"Customer Name","position":"center","name":"CASE WHEN X.COUNT_CUST > 1 THEN 'Multi Customer' WHEN CA.CUST_NAME IS NULL THEN '-' ELSE CA.CUST_NAME END"},{"type":"sort","label":"Collateral Type","position":"center","name":"rma.DESCR"},{"type":"sort","label":"Request By","position":"center","name":"BTD.USR_CRT"},{"type":"sort","label":"Request Date","position":"center","name":"BTD.REQ_DT"},{"type":"label","label":"Task Owner","position":"center"},{"type":"label","label":"Current User","position":"center"},{"type":"label","label":"Is Hold","position":"center"},{"type":"label","label":"Process","position":"center"},{"type":"label","label":"Hold","position":"center"},{"type":"label","label":"Take back","position":"center"}],"bodyList":[{"type":"link","position":"center","property":"BrwTrxDocNo","target":"_blank","path":"/assetdocumentview/borrow/view","param":[{"type":"AssetNo","property":"AssetNo"},{"type":"BrwTrxDocNo","property":"BrwTrxDocNo"}]},{"type":"link","position":"center","property":"AssetNo","target":"_blank","path":"/view/viewasset","param":[{"type":"AssetNo","property":"AssetNo"}]},{"type":"text","position":"left","property":"FullAssetName"},{"type":"action","position":"center","action":[{"type":"switch","case":[{"isHide":false,"conditions":[{"property":"MouNo","restriction":"EQ","value":"-"}],"result":{"property":"MouNo","type":"text"}},{"isHide":false,"conditions":[{"property":"MouNo","restriction":"EQ","value":"Multi MOU"}],"result":{"property":"MouNo","type":"text"}},{"isHide":false,"conditions":[{"property":"MouNo","restriction":"NEQ","value":"-"},{"property":"MouNo","restriction":"NEQ","value":"Multi MOU"}],"result":{"key":"ViewMou","isText":true,"type":"callback","property":"MouNo"}}]}]},{"type":"action","position":"center","action":[{"type":"switch","case":[{"isHide":false,"conditions":[{"property":"AgrmntNo","restriction":"EQ","value":"-"}],"result":{"property":"AgrmntNo","type":"text"}},{"isHide":false,"conditions":[{"property":"AgrmntNo","restriction":"EQ","value":"Multi Agreement"}],"result":{"property":"AgrmntNo","type":"text"}},{"isHide":false,"conditions":[{"property":"AgrmntNo","restriction":"NEQ","value":"-"},{"property":"AgrmntNo","restriction":"NEQ","value":"Multi Agreement"}],"result":{"type":"callback","key":"ViewAgreement","isText":true,"property":"AgrmntNo"}}]}]},{"type":"action","position":"center","action":[{"type":"switch","case":[{"isHide":false,"conditions":[{"property":"CustName","restriction":"EQ","value":"-"}],"result":{"property":"CustName","type":"text"}},{"isHide":false,"conditions":[{"property":"CustName","restriction":"EQ","value":"Multi Customer"}],"result":{"property":"CustName","type":"text"}},{"isHide":false,"conditions":[{"property":"CustName","restriction":"NEQ","value":"-"},{"property":"CustName","restriction":"NEQ","value":"Multi Customer"}],"result":{"key":"ViewCust","isText":true,"type":"callback","property":"CustName"}}]}]},{"type":"text","position":"center","property":"CollateralType"},{"type":"text","position":"center","property":"ReqBy"},{"type":"date","position":"center","property":"ReqDt"},{"type":"text","position":"center","property":"MainUser"},{"type":"text","position":"center","property":"CurrentUser"},{"type":"boolean","position":"center","property":"IsHold"},{"type":"action","position":"center","action":[{"type":"switch","case":[{"isHide":false,"conditions":[{"property":"IsApproved","restriction":"EQ","value":"1"}],"result":{"key":"Action","isText":false,"type":"callback"}},{"isHide":true,"conditions":[{"property":"IsApproved","restriction":"NEQ","value":"1"}]}]}]},{"type":"action","position":"center","action":[{"type":"switch","case":[{"isHide":false,"conditions":[{"property":"IsApproved","restriction":"EQ","value":"1"}],"result":{"key":"HoldTask","isText":false,"type":"callback"}},{"isHide":true,"conditions":[{"property":"IsApproved","restriction":"NEQ","value":"1"}]}]}]},{"type":"action","position":"center","action":[{"type":"switch","case":[{"isHide":true,"conditions":[{"property":"IsRoleAssignment","restriction":"EQ","value":"1"}]},{"isHide":false,"conditions":[{"property":"IsRoleAssignment","restriction":"EQ","value":"0"}],"result":{"key":"TakeBack","isText":false,"type":"callback"}}]}]}]},"criteria":[],"whereValue":[],"fromValue":[],"useIntegration":true,"isHideSearch":false,"isSearched":false,"delay":1,"integrationObj":{"baseUrl":"ApprovalR3Url","apiPath":"GetListOSApvTaskByCategoryCodeAndCurrentUserIdOrMainUserIdAndRoleCode","requestObj":{"CategoryCode":"ASD_BRW","Username":"UserName","RoleCode":"RoleCode"},"leftColumnToJoin":"BrwTrxDocNo","rightColumnToJoin":"TransactionNo","joinType":"INNER","integrationType":"apv","useOffice":false}},"id":"4e25d9d6-5d0a-43dc-917e-16bb6e7facb3"}],"serviceUrl":{"add":{"environment":"","apiPath":"","apiUrl":""},"edit":{"environment":"","apiPath":"","apiUrl":""},"createRfa":{"environment":"","apiPath":"","apiUrl":""}},"isRedirect":false,"redirectOption":"","redirectLink":"","hideSubmitButton":false,"listBtn":[],"onInit":[],"isOverrideSubmit":false,"onSubmit":[],"isOverrideCancel":false,"onCancel":{},"customToastrMsg":""}