{"title":"Payment Request","id":"PaymentRequest_return","addButton":false,"addLink":"","pathOption":"","backButton":false,"component":[{"form":{"subsection":{"title":"Payment Request ","isVertical":false,"isSubsection":true,"isModeAdd":true,"formInput":[{"Action":[],"Type":"DDL","Label":"Payment Request Type","Variable":"MrPayReqTypeCode","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"UseDefaultValue":false,"isUseAPI":true,"DdlItemsObj":null,"DdlReqObj":{"Environment":"FOU","Url":"/v1/RefMaster/GetListKeyValueActiveByCode","CustomObjName":"ReturnObject","CustomKeyName":"Key","CustomValueName":"Value","ReqObj":{"RefMasterTypeCode":"PAY_REQ_TYPE"}}},{"Action":[{"type":"hideField","condition":[{"variable":"IsExistingVendor","restriction":"Eq","value":"true"}],"listField":["VendorName","VendorBankAccNo","VendorBankBranch","VendorBankCode","VendorBankAccName"],"isRevertable":true},{"type":"hideField","condition":[{"variable":"IsExistingVendor","restriction":"Eq","value":"false"}],"listField":["VendorId","VendorBankAcc"],"isRevertable":true},{"type":"bindValue","condition":[],"listBind":[{"variable":"VendorId","value":""},{"variable":"VendorBankAcc","value":""},{"variable":"VendorBankBranch","value":""},{"variable":"VendorBankCode","value":""},{"variable":"VendorBankAccNo","value":""},{"variable":"VendorCode","value":""},{"variable":"VendorBankAccName","value":""}],"isRevertable":false},{"type":"requiredField","condition":[{"variable":"IsExistingVendor","restriction":"Eq","value":"false"}],"listField":["VendorBankAccNo","VendorBankBranch","VendorName","VendorBankCode","VendorBankAccName"],"isRevertable":true},{"type":"requiredField","condition":[{"variable":"IsExistingVendor","restriction":"Eq","value":"true"}],"listField":["VendorId","VendorBankAcc"],"isRevertable":true}],"Type":"BOOL","Label":"Is Existing Vendor","Variable":"IsExistingVendor","Value":true,"IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":false},{"Action":[],"Type":"TEXT","Label":"Vendor","Variable":"VendorName","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Max":"50","Placeholder":""},{"Action":[{"type":"showField","condition":[],"listField":["VendorBankAcc"],"isRevertable":true},{"type":"setLookupCrit","condition":[],"lookupKey":"VendorBankAcc","listCrit":[{"variable":"","value":"","propName":"vba.VENDOR_ID","propValue":"VendorId","restriction":"Eq"}]},{"type":"callAPI","environment":"FOU","apiPath":"/v1/Vendor/GetVendorByVendorId","reqObj":[{"propName":"id","propValue":"VendorId"}],"bindToVar":[{"variable":"VendorCode","value":"VendorCode"}],"bindToDict":[{"variable":"VendorCode","value":"VendorCode"}],"bindToFormArr":[],"condition":[]}],"Type":"LOOKUP","Label":"Vendor","Variable":"VendorId","IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":false,"IsClear":false,"LookupName":"${Lookupvendor}","Criteria":[]},{"Action":[],"Type":"DDL","Label":"Vendor Bank","Variable":"VendorBankCode","IsRequired":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"UseDefaultValue":false,"isUseAPI":true,"DdlItemsObj":null,"DdlReqObj":{"Environment":"FOU","Url":"/v1/RefBank/GetListActiveRefBankAsync","CustomObjName":"ReturnObject","CustomKeyName":"BankCode","CustomValueName":"BankName","ReqObj":{}}},{"Action":[],"Type":"TEXT","Label":"Vendor Bank Branch","Variable":"VendorBankBranch","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"Vendor Bank Account No","Variable":"VendorBankAccNo","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Max":"50","Placeholder":""},{"Action":[],"Type":"TEXT","Label":"Vendor Bank Account Name","Variable":"VendorBankAccName","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[{"type":"callAPI","environment":"FOU","apiPath":"/v1/VendorBankAcc/GetVendorBankAccByVendorBankAccId","reqObj":[{"propName":"Id","propValue":"VendorBankAcc"}],"bindToVar":[{"variable":"VendorBankCode","value":"BankCode"},{"variable":"VendorBankAccNo","value":"BankAccountNo"},{"variable":"VendorBankBranch","value":"BankBranch"},{"variable":"VendorBankAccName","value":"BankAccountName"}],"bindToDict":[],"bindToFormArr":[],"condition":[]}],"Type":"LOOKUP","Label":"Vendor Bank Account","Variable":"VendorBankAcc","IsRequired":true,"IsCallback":true,"IsReadonly":false,"IsHide":false,"IsEditable":false,"IsClear":false,"LookupName":"${Lookup-vendorbankacc}","Criteria":[]},{"Action":[],"Type":"TEXT","Label":"Invoice No","Variable":"InvoiceNo","Value":"","Pattern":"","IsRequired":true,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"Max":"50","Placeholder":""},{"Action":[],"Type":"DDL","Label":"Currency","Variable":"CurrCode","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"UseDefaultValue":false,"isUseAPI":true,"DdlItemsObj":null,"DdlReqObj":{"Environment":"FOU","Url":"/v1/RefCurr/GetListKvpActiveRefCurr","CustomObjName":"ReturnObject","CustomKeyName":"Key","CustomValueName":"Value","ReqObj":{}}},{"Action":[],"Type":"NUMERIC","Label":"Currency Rates","Variable":"CurrRateAmt","Value":"0","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"Min":"1","Max":""},{"Action":[],"Type":"DATE","Label":"Invoice Date","Variable":"InvoiceDt","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"Max":null,"MinDtCode":null,"MinOperator":null,"MinValue":null,"MaxDtCode":null,"MaxOperator":null,"MaxValue":null,"DtRestrictOptMin":"","DtRestrictOptMax":""},{"Action":[],"Type":"LOOKUP","Label":"Charge to Agreement","Variable":"ChargedToAgrNo","IsRequired":false,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"IsClear":false,"LookupName":"${Agreementlookup}","Criteria":[]},{"Action":[],"Type":"CURRENCY","Label":"Invoice Amount","Variable":"InvoiceAmt","Value":"0","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"Min":"","Max":"","CurrencyMaskConfig":{"precision":"2"}},{"Action":[],"Type":"CURRENCY","Label":"Amount Charged","Variable":"ChargedAmt","Value":"0","IsRequired":true,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"Min":"","Max":"","CurrencyMaskConfig":{"precision":"2"}},{"Action":[],"Type":"TEXTAREA","Label":"Payment Request Notes","Variable":"Notes","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":false,"IsEditable":false,"Max":"200","Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorCode","Variable":"VendorCode","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankCode","Variable":"VendorBankCode","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""},{"Action":[],"Type":"TEXT","Label":"VendorBankAccNo","Variable":"VendorBankAccNo","Value":"","Pattern":"","IsRequired":false,"IsUppercase":false,"IsCallback":false,"IsReadonly":false,"IsHide":true,"IsEditable":false,"Placeholder":""}],"onLoad":[],"criteria":[],"mapCookie":[],"initAction":[]}},"id":"89d1797e-adb2-497c-96a6-563ecbdfe1bd"},{"fileupload":{"label":"Upload Document","variable":"PayReqDoc","docuploadType":"Dokumen Payment Request","limitFileSize":"1024","allowedExt":"pdf;doc;docx;xls;xlsx","isRequired":false,"metadata":[{"label":"Jenis Dokumen","value":"Dokumen Payment Request"}]},"id":"05db5f91-252b-4e4d-99d7-4a71aff3d0dd"},{"table":{"isFromApi":false,"title":"List Allocation","resultData":"PayReqDObj","isSubsection":true,"usePagination":true,"includeSubmit":true,"tableInput":{"isSeq":true,"headerList":[{"type":"label","label":"Employee","position":"center"},{"type":"label","label":"Business Activity","position":"center"},{"type":"label","label":"Activity","position":"center"},{"type":"label","label":"Sub Activity","position":"center"},{"type":"label","label":"Allocation","position":"center"},{"type":"label","label":"Origin Office","position":"center"},{"type":"label","label":"Cost Distributed","position":"center"},{"type":"label","label":"Amount","position":"center"},{"type":"label","label":"VAT (PPN)","position":"center"},{"type":"label","label":"Income Tax (PPH)","position":"center"},{"type":"label","label":"Amount After Tax","position":"center"},{"type":"label","label":"Notes","position":"center"},{"type":"label","label":"edit","position":"center"}],"bodyList":[{"type":"text","position":"left","property":"EmpName","isFlagColor":false},{"type":"text","position":"left","property":"BizAct","isFlagColor":false},{"type":"text","position":"left","property":"Act","isFlagColor":false},{"type":"text","position":"left","property":"SubAct","isFlagColor":false},{"type":"text","position":"left","property":"AllocName","isFlagColor":false},{"type":"text","position":"left","property":"OriginOfficeName","isFlagColor":false},{"type":"text","position":"center","property":"IsCostDistributedName","isFlagColor":false},{"type":"decimal","position":"left","property":"ReqAmt","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"decimal","position":"right","property":"Vat","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"decimal","position":"right","property":"IncomeTax","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"decimal","position":"right","property":"AmtAfterTax","isFlagColor":false,"precision":"0.2","IsPrcnt":false},{"type":"text","position":"left","property":"Descr","isFlagColor":false},{"type":"action","position":"center","action":[{"type":"modal","width":"80","isTemplate":true,"component":"AddEditAdvancePaymentAllocPaymentReq","disableClose":false,"param":[{"type":"RowObj","property":"RowObj"},{"type":"mode","property":"edit"},{"type":"VendorId","property":"form.VendorId"}],"refreshFrom":"fromLocal","mapToDict":"PayReqDObj","affectedTable":"3efa772c-15ca-4e74-931a-8f2c93032837","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"CostMaster.CostMaster_1","propValue":"CostMaster_1"},{"propName":"CostMaster.CostMaster_2","propValue":"CostMaster_2"},{"propName":"CostMaster.CostMaster_3","propValue":"CostMaster_3"},{"propName":"CostMaster.CostMaster_4","propValue":"CostMaster_4"}],"excObj":[]}]}],"footerList":[{"type":"BLANK","position":"left"},{"type":"BLANK","position":"left"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"BLANK"},{"type":"LABEL","position":"center","label":"Total"},{"type":"AGGREGATE","position":"right","label":"ReqAmt","property":"ReqAmt","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"AGGREGATE","position":"right","label":"Vat","property":"Vat","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"AGGREGATE","position":"right","label":"IncomeTax","property":"IncomeTax","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"AGGREGATE","position":"right","label":"AmtAfterTax","property":"AmtAfterTax","aggMode":"SUM","isCurr":true,"precision":"0.2"},{"type":"BLANK"},{"type":"BLANK"}]},"getData":{"environment":"","apiPath":"","customObjName":"ReturnObject","reqObj":[]}},"id":"3efa772c-15ca-4e74-931a-8f2c93032837","listBtn":[{"displayName":"Add Allocation","id":"add allocationId","key":"AddAllocation","position":"top","icon":"","cssClass":"btn-primary-2 m-2","conditions":[{"property":"form.CurrCode","restriction":"NEQ","value":""},{"property":"form.IsExistingVendor","restriction":"EQ","value":"true"},{"property":"form.VendorId","restriction":"NEQ","value":""}],"btnType":"button","action":{"type":"modal","width":"85","isTemplate":true,"disableClose":false,"params":[{"propName":"VendorId","propValue":"form.VendorId"},{"propName":"CurrCode","propValue":"form.CurrCode"},{"propName":"mode","propValue":"add"}],"refreshFrom":"fromLocal","affectedTable":"3efa772c-15ca-4e74-931a-8f2c93032837","mapToDict":"PayReqDObj","mapObj":[{"propName":"_form","propValue":"form"},{"propName":"CostMaster.CostMaster_1","propValue":"CostMaster_1"},{"propName":"CostMaster.CostMaster_2","propValue":"CostMaster_2"},{"propName":"CostMaster.CostMaster_3","propValue":"CostMaster_3"},{"propName":"CostMaster.CostMaster_4","propValue":"CostMaster_4"}],"excObj":[],"component":"AddEditAdvancePaymentAllocPaymentReq"}},{"displayName":"Add Allocation","id":"add allocationId","key":"","position":"top","icon":"","cssClass":"btn-primary-2 m-2","conditions":[{"property":"form.CurrCode","restriction":"EQ","value":""},{"property":"form.IsExistingVendor","restriction":"EQ","value":"true"},{"property":"form.VendorId","restriction":"NEQ","value":""}],"btnType":"button","action":{"type":"toaster","mode":"warning","message":"Please Fill Currency Input"}},{"displayName":"Add Allocation","id":"add allocationId","key":"","position":"top","icon":"","cssClass":"btn-primary-2 m-2","conditions":[{"property":"form.IsExistingVendor","restriction":"EQ","value":"false"}],"btnType":"button","action":{"type":"modal","params":[{"propName":"MrTaxCalcMethodCode","propValue":""},{"propName":"CurrCode","propValue":"form.CurrCode"}],"width":"","isTemplate":true,"disableClose":true,"refreshFrom":"fromLocal","component":"AddEditAdvancePaymentAllocPaymentReq","affectedTable":"3efa772c-15ca-4e74-931a-8f2c93032837","mapToDict":"PayReqDObj"}},{"displayName":"Add Allocation","id":"add allocationId","key":"","position":"top","icon":"","cssClass":"btn-primary-2 m-2","conditions":[{"property":"form.IsExistingVendor","restriction":"EQ","value":"true"},{"property":"form.VendorId","restriction":"EQ","value":""},{"property":"form.CurrCode","restriction":"NEQ","value":""}],"btnType":"button","action":{"type":"toaster","mode":"warning","message":"Please Choose Existing Vendor"}},{"displayName":"Add Allocation","id":"add allocationId","key":"","position":"top","icon":"","cssClass":"btn-primary-2 m-2","conditions":[{"property":"form.VendorId","restriction":"EQ","value":""},{"property":"form.CurrCode","restriction":"EQ","value":""},{"property":"form.IsExistingVendor","restriction":"EQ","value":"true"}],"btnType":"button","action":{"type":"toaster","mode":"warning","message":"Please Fill Vendor Information And Currency"}}],"conditions":[]},{"approvalcreate":{"categoryCode":"PAY_REQ_CAT","refReasonTypeCode":"PAY_REQ","isHideTrxNo":true,"apvTypecodes":[{"TypeCode":"APV_LIMIT"},{"Attributes[0].AttributeName":"Approval Amount"},{"Attributes[0].AttributeValue":"ReqAmt_footer"}],"setApprovalObj":{"environment":"","apiPath":"","reqObj":{}},"onSubmit":{"environment":"FoundationR3Url","apiPath":"/v1/Approval/SubmitApproval","approvalRequestObj":{}},"fromApi":false,"schmCode":"PAY_REQ_SCHM"},"id":"21f55ad6-f7ca-423d-b999-1079de090a88"}],"serviceUrl":{"add":{"environment":"","apiPath":"","apiUrl":""},"edit":{"environment":"","apiPath":"","apiUrl":""},"createRfa":{"environment":"","apiPath":"","apiUrl":""}},"hideTitle":false,"isRedirect":false,"redirectOption":"","redirectLink":"","hideSubmitButton":false,"listBtn":[],"customToastrMsg":"","onCancel":{},"isOverrideSubmit":true,"isOverrideCancel":false,"onSubmit":[{"conditions":[],"result":{"type":"http","environment":"FinopsUrl","path":"/v1/PaymentRequest/SubmitPaymentRequest","reqObj":[{"propName":"RequestRFAInfoObj","propValue":"form.RFAInfo"},{"propName":"IsSubmit","propValue":"true"},{"propName":"PayReqNo","propValue":"PayReqNo"},{"propName":"PayReqHObj","propValue":"form"},{"propName":"PayReqHObj.PayReqDObj","propValue":"PayReqDObj"}],"onSuccess":[{"result":{"type":"toaster","mode":"success","message":"${Message}"},"conditions":[]},{"result":{"type":"reload","params":[]},"conditions":[]}],"onError":{"type":"toaster","message":""},"mapResToDict":[]}}],"hideCancelButton":false,"onInit":[],"conditionalTitle":[],"persistData":false,"persistPropName":"PaymentRequest"}